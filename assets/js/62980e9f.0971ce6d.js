"use strict";(self.webpackChunkbeyond_wasm=self.webpackChunkbeyond_wasm||[]).push([[8692],{6292:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"wasm/wasi/wasi-io-and-clocks","title":"I/O \u4e0e\u65f6\u949f","description":"WASI \u901a\u8fc7\u80fd\u529b\u6388\u4e88\u63d0\u4f9b\u53d7\u63a7 I/O\u3002\u672c\u8282\u8986\u76d6\u6587\u4ef6\u3001stdio \u4e0e\u65f6\u949f\u63a5\u53e3\u7684\u8981\u70b9\u3002","source":"@site/docs/wasm/04-wasi/io-and-clocks.md","sourceDirName":"wasm/04-wasi","slug":"/wasm/wasi/wasi-io-and-clocks","permalink":"/beyond-wasm/docs/wasm/wasi/wasi-io-and-clocks","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/beyond-wasm/edit/main/docs/wasm/04-wasi/io-and-clocks.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"wasi-io-and-clocks","title":"I/O \u4e0e\u65f6\u949f","sidebar_label":"I/O \u4e0e\u65f6\u949f","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\u672c\u7ae0\u5bfc\u8bfb","permalink":"/beyond-wasm/docs/wasm/wasi/wasi-overview"},"next":{"title":"\u80fd\u529b\u4e0e\u6743\u9650","permalink":"/beyond-wasm/docs/wasm/wasi/wasi-capabilities"}}');var t=i(4848),a=i(8453);const d={id:"wasi-io-and-clocks",title:"I/O \u4e0e\u65f6\u949f",sidebar_label:"I/O \u4e0e\u65f6\u949f",sidebar_position:2},r="I/O \u4e0e\u65f6\u949f",o={},l=[{value:"\u6587\u4ef6\u7cfb\u7edf\u4e0e stdio",id:"\u6587\u4ef6\u7cfb\u7edf\u4e0e-stdio",level:2},{value:"\u65f6\u95f4/\u65f6\u949f\u63a5\u53e3",id:"\u65f6\u95f4\u65f6\u949f\u63a5\u53e3",level:2},{value:"\u8fd0\u884c\u793a\u4f8b",id:"\u8fd0\u884c\u793a\u4f8b",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"io-\u4e0e\u65f6\u949f",children:"I/O \u4e0e\u65f6\u949f"})}),"\n",(0,t.jsx)(s.p,{children:"WASI \u901a\u8fc7\u80fd\u529b\u6388\u4e88\u63d0\u4f9b\u53d7\u63a7 I/O\u3002\u672c\u8282\u8986\u76d6\u6587\u4ef6\u3001stdio \u4e0e\u65f6\u949f\u63a5\u53e3\u7684\u8981\u70b9\u3002"}),"\n",(0,t.jsx)(s.h2,{id:"\u6587\u4ef6\u7cfb\u7edf\u4e0e-stdio",children:"\u6587\u4ef6\u7cfb\u7edf\u4e0e stdio"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u9884\u6253\u5f00\u76ee\u5f55\u540e\uff0c\u7a0b\u5e8f\u53ef\u5728\u6c99\u7bb1\u5185\u6309\u76f8\u5bf9\u8def\u5f84\u8bbf\u95ee\u3002"}),"\n",(0,t.jsx)(s.li,{children:"stdio\uff08stdin/stdout/stderr\uff09\u53ef\u7528\u4e8e\u7b80\u5355\u4ea4\u4e92\u4e0e\u65e5\u5fd7\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"\u793a\u610f\uff1a"}),"\n",(0,t.jsx)(s.mermaid,{value:'sequenceDiagram\n\tparticipant User as \u7528\u6237\n\tparticipant Host as \u5bbf\u4e3b\n\tparticipant Guest as WASI \u7a0b\u5e8f\n\tUser->>Host: --dir=. \u6388\u4e88\u5f53\u524d\u76ee\u5f55\n\tHost->>Guest: \u9884\u6253\u5f00\u76ee\u5f55\u53e5\u67c4\n\tGuest->>Host: open("./sample.txt")\n\tHost--\x3e>Guest: fd (\u82e5\u5df2\u88ab\u6388\u4e88)\n\tGuest->>Guest: \u8bfb\u53d6/\u5904\u7406\u5e76\u901a\u8fc7 stdout \u6253\u5370'}),"\n",(0,t.jsx)(s.h2,{id:"\u65f6\u95f4\u65f6\u949f\u63a5\u53e3",children:"\u65f6\u95f4/\u65f6\u949f\u63a5\u53e3"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\u5e38\u89c1\u63a5\u53e3\uff1a",(0,t.jsx)(s.code,{children:"clock_time_get"}),"\uff08\u8fd0\u884c\u65f6\u5c01\u88c5\uff09\u3002"]}),"\n",(0,t.jsx)(s.li,{children:"\u5178\u578b\u7528\u9014\uff1a\u6253\u70b9/\u65e5\u5fd7/\u8fc7\u671f\u5224\u65ad\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"\u6ce8\u610f\uff1a"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u7cbe\u5ea6\u4e0e\u65f6\u533a\uff1aWASI \u63d0\u4f9b\u7684\u662f\u539f\u59cb\u65f6\u95f4\u6e90\uff08\u5982\u7eb3\u79d2\u7ea7 epoch\uff09\uff0c\u4e0d\u542b\u672c\u5730\u5316/\u65f6\u533a\u8f6c\u6362\uff1b"}),"\n",(0,t.jsx)(s.li,{children:"\u53ef\u79fb\u690d\u6027\uff1a\u4e0d\u540c\u8fd0\u884c\u65f6\u53ef\u80fd\u5bf9\u9ad8\u7cbe\u5ea6\u65f6\u949f\u6743\u9650\u6709\u4e0d\u540c\u7b56\u7565\uff1b"}),"\n",(0,t.jsx)(s.li,{children:"\u9519\u8bef\u5904\u7406\uff1a\u5f53\u7f3a\u4e4f\u80fd\u529b\u65f6\u5e94\u663e\u793a\u53cb\u597d\u4fe1\u606f\u5e76\u964d\u7ea7\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"\u8fd0\u884c\u793a\u4f8b",children:"\u8fd0\u884c\u793a\u4f8b"}),"\n",(0,t.jsxs)(s.p,{children:["\u53c2\u8003 ",(0,t.jsx)(s.a,{href:"https://github.com/Thneoly/beyond-wasm/tree/main/examples/ch04/wasi_fs_time",children:"examples/ch04/wasi_fs_time"}),"\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"rustup target add wasm32-wasi\ncd examples/ch04/wasi_fs_time\ncargo build --release --target wasm32-wasi\nwasmtime --dir=. target/wasm32-wasi/release/wasi_fs_time.wasm sample.txt\n"})})]})}function m(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>d,x:()=>r});var n=i(6540);const t={},a=n.createContext(t);function d(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);